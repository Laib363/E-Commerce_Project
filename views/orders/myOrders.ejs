<% layout('layouts/boilerplate') %>

<div class="container">
  <h1 class="mb-4">My Orders</h1>

  <% if (!orders || orders.length === 0) { %>
    <div class="alert alert-info" role="alert">
      You haven't placed any orders yet.
    </div>
  <% } else { %>
    <div class="list-group">
      <% orders.forEach(order => { %>
        <a href="/orders/<%= order._id %>" class="list-group-item list-group-item-action flex-column align-items-start mb-3 shadow-sm border-0 rounded">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Order #<%= order.orderId %></h5>
            <small>Placed on: <%= new Date(order.orderDate).toLocaleDateString() %></small>
          </div>
          <p class="mb-1">
            Status: <span class="fw-bold 
              <% if (order.status === 'Delivered') { %>
                text-success
              <% } else if (order.status === 'Shipped') { %>
                text-primary
              <% } else { %>
                text-warning
              <% } %>
            "><%= order.status %></span>
          </p>
          <small>Total: $<%= order.totalAmount %></small>
          <br>
          <small>Items: <%= order.items.length %></small>
        </a>
      <% }) %>
    </div>
  <% } %>
</div>